package net.sf.webcat.reporter;
// Generated by the WOLips Templateengine Plug-in at Jan 30, 2007 2:42:54 PM

import java.util.UUID;

import net.sf.webcat.core.WCComponent;
import net.sf.webcat.grader.EditPluginGlobalsPage;

import com.webobjects.appserver.*;
import com.webobjects.foundation.NSArray;
import com.webobjects.foundation.NSMutableArray;

public class PickTemplateToGeneratePage extends ReporterComponent {

	public NSArray<ReportTemplate> reportTemplates;
	public ReportTemplate reportTemplate;
	public int index;

    public PickTemplateToGeneratePage(WOContext context) {
        super(context);
    }

    public void awake()
    {
    	reportTemplates = ReportTemplate.objectsForAllTemplates(
    			wcSession().defaultEditingContext());
    }
    
    public WOComponent templateChosen()
    {
    	clearSessionData();

    	setReportUuidInSession(UUID.randomUUID().toString());
        setReportTemplateInSession(reportTemplate);
        setCurrentReportDataSetInSession(0);
        createPageControllerInSession();

        return pageControllerInSession().nextPage();

        /*NSArray<ReportDataSet> dataSets = reportTemplate.dataSets();
        if(dataSets == null || dataSets.isEmpty())
        {
        	return pageWithName(GenerationSummaryPage.class.getName());
        }
        else
        {
        	ConstructDataSetQueryPage page = (ConstructDataSetQueryPage)
        		pageWithName(ConstructDataSetQueryPage.class.getName());

        	page.takeValueForKey(dataSets, "dataSets");
        	page.takeValueForKey(0, "currentDataSetIndex");

        	return page;
        }*/
    }
}
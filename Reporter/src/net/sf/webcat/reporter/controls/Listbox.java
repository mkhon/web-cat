package net.sf.webcat.reporter.controls;
// Generated by the WOLips Templateengine Plug-in at Mar 12, 2007 12:10:04 PM

import com.webobjects.appserver.*;
import com.webobjects.appserver._private.WODynamicGroup;
import com.webobjects.appserver._private.WORepetition;
import com.webobjects.foundation.NSDictionary;

import er.ajax.AjaxUtils;

public class Listbox extends WORepetition
{
	private WOElement children;
	private NSDictionary associations;
	
	public Listbox(String name, NSDictionary associations, WOElement children)
	{
		super(name, associations, children);
		
		this.children = children;
		this.associations = associations;
	}
	
	public Object valueForBinding(String name, WOComponent component) {
		return valueForBinding(name, associations, component);
	}

	public static Object valueForBinding(String name, Object defaultValue, NSDictionary associations, WOComponent component) {
		Object value = valueForBinding(name, associations, component);
		if (value != null) {
			return value;
		}
		return defaultValue;
	}

	public static Object valueForBinding(String name, NSDictionary associations, WOComponent component) {
		WOAssociation association = (WOAssociation) associations.objectForKey(name);
		if (association != null) {
			return association.valueInComponent(component);
		}
		return null;
	}

	public void appendTagAttributeToResponse(WOResponse response, String name, Object object) {
		if (object != null) {
			response._appendTagAttributeAndValue(name, object.toString(), true);
		}
	}

	public void appendToResponse(WOResponse response, WOContext context)
	{
		WOComponent component = context.component();
		response.appendContentString("<div class=\"listbox\"><ul ");

		String id = _containerID(context);
		appendTagAttributeToResponse(response, "id", id);
		appendTagAttributeToResponse(response, "class", valueForBinding("class", component));
		appendTagAttributeToResponse(response, "style", valueForBinding("style", component));		
		// appendTagAttributeToResponse(response, "woElementID", context.elementID());
		response.appendContentString(">");

		super.appendToResponse(response, context);

		response.appendContentString("</ul></div>");
	}
	
	protected String _containerID(WOContext context)
	{
		String id = (String) valueForBinding("id", context.component());
		if (id == null) {
			id = AjaxUtils.toSafeElementID(context.elementID());
		}
		return id;
	}
}
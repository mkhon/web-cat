/*
 * Ext - JS Library 1.0 Alpha 3 - Rev 4
 * Copyright(c) 2006-2007, Jack Slocum.
 * 
 * http://www.extjs.com/license.txt
 */

Ext.tree.DefaultSelectionModel=function(){this.selNode=null;this.events={"selectionchange":true,"beforeselect":true};};Ext.extend(Ext.tree.DefaultSelectionModel,Ext.util.Observable,{init:function(_1){this.tree=_1;_1.el.on("keydown",this.onKeyDown,this);_1.on("click",this.onNodeClick,this);},onNodeClick:function(_2,e){this.select(_2);},select:function(_4){var _5=this.selNode;if(_5!=_4&&this.fireEvent("beforeselect",this,_4,_5)!==false){if(_5){_5.ui.onSelectedChange(false);}this.selNode=_4;_4.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,_4,_5);}return _4;},unselect:function(_6){if(this.selNode==_6){this.clearSelections();}},clearSelections:function(){var n=this.selNode;if(n){n.ui.onSelectedChange(false);this.selNode=null;this.fireEvent("selectionchange",this,null);}return n;},getSelectedNode:function(){return this.selNode;},isSelected:function(_8){return this.selNode==_8;},onKeyDown:function(e){var s=this.selNode||this.lastSelNode;var sm=this;if(!s){return;}var k=e.getKey();switch(k){case e.DOWN:e.stopEvent();if(s.firstChild&&s.isExpanded()){this.select(s.firstChild,e);}else{if(s.nextSibling){this.select(s.nextSibling,e);}else{if(s.parentNode){s.parentNode.bubble(function(){if(this.nextSibling){sm.select(this.nextSibling,e);return false;}});}}}break;case e.UP:e.stopEvent();var ps=s.previousSibling;if(ps){if(!ps.isExpanded()||ps.childNodes.length<1){this.select(ps,e);}else{var lc=ps.lastChild;while(lc&&lc.isExpanded()&&lc.childNodes.length>0){lc=lc.lastChild;}this.select(lc,e);}}else{if(s.parentNode&&(this.tree.rootVisible||!s.parentNode.isRoot)){this.select(s.parentNode,e);}}break;case e.RIGHT:e.preventDefault();if(s.hasChildNodes()){if(!s.isExpanded()){s.expand();}else{if(s.firstChild){this.select(s.firstChild,e);}}}break;case e.LEFT:e.preventDefault();if(s.hasChildNodes()&&s.isExpanded()){s.collapse();}else{if(s.parentNode&&(this.tree.rootVisible||s.parentNode!=this.tree.getRootNode())){this.select(s.parentNode,e);}}break;}}});Ext.tree.MultiSelectionModel=function(){this.selNodes=[];this.selMap={};this.events={"selectionchange":true};};Ext.extend(Ext.tree.MultiSelectionModel,Ext.util.Observable,{init:function(_f){this.tree=_f;_f.el.on("keydown",this.onKeyDown,this);_f.on("click",this.onNodeClick,this);},onNodeClick:function(_10,e){this.select(_10,e,e.ctrlKey);},select:function(_12,e,_14){if(_14!==true){this.clearSelections(true);}this.selNodes.push(_12);this.selMap[_12.id]=_12;this.lastSelNode=_12;_12.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,this.selNodes);return _12;},unselect:function(_15){if(this.selMap[_15.id]){_15.ui.onSelectedChange(false);var sn=this.selNodes;var _17=-1;if(sn.indexOf){_17=sn.indexOf(_15);}else{for(var i=0,len=sn.length;i<len;i++){if(sn[i]==_15){_17=i;break;}}}if(_17!=-1){this.selNodes.splice(_17,1);}delete this.selMap[_15.id];this.fireEvent("selectionchange",this,this.selNodes);}},clearSelections:function(_1a){var sn=this.selNodes;if(sn.length>0){for(var i=0,len=sn.length;i<len;i++){sn[i].ui.onSelectedChange(false);}this.selNodes=[];this.selMap={};if(_1a!==true){this.fireEvent("selectionchange",this,this.selNodes);}}},isSelected:function(_1e){return this.selMap[_1e.id]?true:false;},getSelectedNodes:function(){return this.selNodes;},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown});

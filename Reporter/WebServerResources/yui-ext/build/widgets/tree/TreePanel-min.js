/*
 * Ext - JS Library 1.0 Alpha 3 - Rev 4
 * Copyright(c) 2006-2007, Jack Slocum.
 * 
 * http://www.extjs.com/license.txt
 */

Ext.tree.TreePanel=function(el,_2){Ext.tree.TreePanel.superclass.constructor.call(this);this.el=Ext.get(el);this.el.addClass("x-tree");this.id=this.el.id;Ext.apply(this,_2);this.addEvents({"beforeload":true,"load":true,"textchange":true,"beforeexpand":true,"beforecollapse":true,"expand":true,"disabledchange":true,"collapse":true,"beforeclick":true,"click":true,"dblclick":true,"contextmenu":true,"beforechildrenrendered":true,"startdrag":true,"enddrag":true,"dragdrop":true,"beforenodedrop":true,"nodedrop":true,"nodedragover":true});if(this.singleExpand){this.on("beforeexpand",this.restrictExpand,this);}if(this.enableEdit){var ge=new Ext.Editor(new Ext.form.TextField({allowBlank:false,blankText:"A name is required",width:100}),{alignment:"tl-tl"});ge.on("complete",function(e,_5){ge.node.setText(_5);});tree.on("beforeclick",function(_6){if(tree.getSelectionModel().isSelected(_6)){ge.node=_6;ge.startEdit(_6.ui.getAnchor(),_6.text);return false;}});}};Ext.extend(Ext.tree.TreePanel,Ext.data.Tree,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,bindEditor:function(_7){this.el.on("scroll",function(){_7.cancelEdit();});_7.el.addClass();},restrictExpand:function(_8){var p=_8.parentNode;if(p){if(p.expandedChild&&p.expandedChild.parentNode==p){p.expandedChild.collapse();}p.expandedChild=_8;}},setRootNode:function(_a){Ext.tree.TreePanel.superclass.setRootNode.call(this,_a);if(!this.rootVisible){_a.ui=new Ext.tree.RootTreeNodeUI(_a);}return _a;},getEl:function(){return this.el;},getLoader:function(){return this.loader;},expandAll:function(){this.root.expand(true);},collapseAll:function(){this.root.collapse(true);},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel();}return this.selModel;},expandPath:function(_b,_c,_d){_c=_c||"id";var _e=_b.split(this.pathSeparator);var _f=this.root;if(_f.attributes[_c]!=_e[1]){if(_d){_d(false,null);}return;}var _10=1;var f=function(){if(++_10==_e.length){if(_d){_d(true,_f);}return;}var c=_f.findChild(_c,_e[_10]);if(!c){if(_d){_d(false,_f);}return;}_f=c;c.expand(false,false,f);};_f.expand(false,false,f);},selectPath:function(_13,_14,_15){_14=_14||"id";var _16=_13.split(this.pathSeparator);var v=_16.pop();if(_16.length>0){var f=function(_19,_1a){if(_19&&_1a){var n=_1a.findChild(_14,v);if(n){n.select();if(_15){_15(true,n);}}}else{if(_15){_15(false,n);}}};this.expandPath(_16.join(this.pathSeparator),_14,f);}else{this.root.select();if(_15){_15(true,this.root);}}},render:function(){this.container=this.el.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.lines?"x-tree-lines":"x-tree-no-lines")});if(this.containerScroll){Ext.dd.ScrollManager.register(this.el);}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===true});}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll});}this.getSelectionModel().init(this);this.root.render();if(!this.rootVisible){this.root.renderChildren();}return this;}});

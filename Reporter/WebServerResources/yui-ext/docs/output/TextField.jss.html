<html><head><title>TextField.js</title><link rel="stylesheet" type="text/css" href="../resources/style.css" media="screen"/></head><body><h1>TextField.js</h1><pre class="highlighted"><code>Ext.form.TextField = <b>function</b>(config){
    Ext.form.TextField.superclass.constructor.call(<b>this</b>, config);
};

Ext.extend(Ext.form.TextField, Ext.form.Field,  {
    initEvents : <b>function</b>(){
        Ext.form.TextField.superclass.initEvents.call(<b>this</b>);
        <b>this</b>.el.on(<b>this</b>.validationEvent, <b>this</b>.validate, <b>this</b>, {buffer: <b>this</b>.validationDelay});
        <b>if</b>(this.selectOnFocus || <b>this</b>.emptyText){
            <b>this</b>.on(&quot;focus&quot;, <b>this</b>.preFocus, <b>this</b>);
            <b>if</b>(this.emptyText){
                <b>this</b>.on('blur', <b>this</b>.postBlur, <b>this</b>);
                <b>if</b>(!<b>this</b>.value &amp;&amp; <b>this</b>.getRawValue().length &lt; 1){
                    <b>this</b>.setRawValue(<b>this</b>.emptyText);
                    <b>this</b>.el.addClass(<b>this</b>.emptyClass);
                }
            }
        }
        <b>if</b>(this.maskRe || (<b>this</b>.vtype &amp;&amp; <b>this</b>.disableKeyFilter !== true &amp;&amp; (<b>this</b>.maskRe = Ext.form.VTypes[<b>this</b>.vtype+'Mask']))){
            <b>this</b>.el.on(&quot;keypress&quot;, <b>this</b>.filterKeys, <b>this</b>);
        }
    },

    preFocus : <b>function</b>(){
        <b>if</b>(this.emptyText){
            <b>if</b>(this.getRawValue() == <b>this</b>.emptyText){
                <b>this</b>.setRawValue('');
            }
            <b>this</b>.el.removeClass(<b>this</b>.emptyClass);
        }
        <b>if</b>(this.selectOnFocus){
            <b>this</b>.el.dom.select();
        }
    },

    postBlur : <b>function</b>(){
        <b>if</b>(this.emptyText &amp;&amp; <b>this</b>.getRawValue().length &lt; 1){
            <b>this</b>.setRawValue(<b>this</b>.emptyText);
            <b>this</b>.el.addClass(<b>this</b>.emptyClass);
        }
    },

    filterKeys : <b>function</b>(e){
        <b>var</b> k = e.getKey();
        <b>if</b>(!Ext.isIE &amp;&amp; (e.isNavKeyPress() || k == e.BACKSPACE || k == e.DELETE)){
            <b>return</b>;
        }
        <b>var</b> c = e.getCharCode();
        <b>if</b>(!<b>this</b>.maskRe.test(String.fromCharCode(c) || '')){
            e.stopEvent();
        }
    },

    validateValue : <b>function</b>(value){
        <b>if</b>(value.length &lt; 1){ <i>// <b>if</b> it's blank</i>
             <b>if</b>(this.allowBlank){
                 <b>this</b>.clearInvalid();
                 <b>return</b> true;
             }<b>else</b>{
                 <b>this</b>.markInvalid(<b>this</b>.blankText);
                 <b>return</b> false;
             }
        }
        <b>if</b>(value.length &lt; <b>this</b>.minLength){
            <b>this</b>.markInvalid(String.format(<b>this</b>.minLengthText, <b>this</b>.minLength));
            <b>return</b> false;
        }
        <b>if</b>(value.length &gt; <b>this</b>.maxLength){
            <b>this</b>.markInvalid(String.format(<b>this</b>.maxLengthText, <b>this</b>.maxLength));
            <b>return</b> false;
        }
        <b>if</b>(this.vtype){
            <b>var</b> vt = Ext.form.VTypes;
            <b>if</b>(!vt[<b>this</b>.vtype](value)){
                <b>this</b>.markInvalid(<b>this</b>.vtypeText || vt[<b>this</b>.vtype +'Text']);
                <b>return</b> false;
            }
        }
        <b>if</b>(typeof <b>this</b>.validator == &quot;<b>function</b>&quot;){
            <b>var</b> msg = <b>this</b>.validator(value);
            <b>if</b>(msg !== true){
                <b>this</b>.markInvalid(msg);
                <b>return</b> false;
            }
        }
        <b>if</b>(this.regex &amp;&amp; !<b>this</b>.regex.test(value)){
            <b>this</b>.markInvalid(<b>this</b>.regexText);
            <b>return</b> false;
        }
        <b>return</b> true;
    },

    selectText : <b>function</b>(start, end){
        <b>var</b> v = <b>this</b>.getRawValue();
        <b>if</b>(v.length &gt; 0){
            start = start === undefined ? 0 : start;
            end = end === undefined ? v.length : end;
            <b>var</b> d = <b>this</b>.el.dom;
            <b>if</b>(d.setSelectionRange){
                d.setSelectionRange(start, end);
            }<b>else</b> if(d.createTextRange){
                <b>var</b> range = d.createTextRange();
                range.moveStart(&quot;character&quot;, start);
                range.moveEnd(&quot;character&quot;, v.length-end);
                range.select();
            }
        }
    },

    vtype : null,
    maskRe : null,
    disableKeyFilter:false,
    allowBlank : true,
    minLength : 0,
    maxLength : Number.MAX_VALUE,
    minLengthText : &quot;The minimum length <b>for</b> this field is {0}&quot;,
    maxLengthText : &quot;The maximum length <b>for</b> this field is {0}&quot;,
    selectOnFocus : false,
    blankText : &quot;This field is required&quot;,
    validator : null,
    regex : null,
    regexText : &quot;&quot;,
    emptyText : null,
    emptyClass : 'x-form-empty-field'
});</code></pre><hr><div style="font-size:10px;text-align:center;color:gray;">yui-ext - Copyright &copy; 2006 Jack Slocum.  |
    Yahoo! UI - Copyright &copy; 2006 Yahoo! Inc.<br />All rights reserved.</div>
    </body></html>
<html><head><title>Shadow.js</title><link rel="stylesheet" type="text/css" href="../resources/style.css" media="screen"/></head><body><h1>Shadow.js</h1><pre class="highlighted"><code>Ext.Shadow = <b>function</b>(config){
    Ext.apply(<b>this</b>, config);
    <b>if</b>(typeof <b>this</b>.mode != &quot;string&quot;){
        <b>this</b>.mode = <b>this</b>.defaultMode;
    }
    <b>var</b> o = <b>this</b>.offset, a = {h: 0};
    <b>switch</b>(this.mode.toLowerCase()){
        <b>case</b> &quot;drop&quot;:
            a.w = 0;
            a.l = a.t = o;
        <b>break</b>;
        <b>case</b> &quot;sides&quot;:
            a.w = (o*2);
            a.l = -o;
            a.t = o;
        <b>break</b>;
        <b>case</b> &quot;frame&quot;:
            a.w = a.h = (o*2);
            a.l = a.t = -o;
        <b>break</b>;
    };
    <b>this</b>.adjusts = a;
};

Ext.Shadow.prototype = {
    defaultMode: &quot;drop&quot;,
    offset: 4,
    show : <b>function</b>(target){
        target = Ext.get(target);
        <b>if</b>(!<b>this</b>.el){
            <b>this</b>.el = Ext.Shadow.Pool.pull();
            <b>this</b>.el.insertBefore(target);
        }
        <b>this</b>.el.setStyle(&quot;z-index&quot;, <b>this</b>.zIndex || parseInt(target.getStyle(&quot;z-index&quot;), 10)-1);
        <b>this</b>.realign(
                target.getLeft(true),
                target.getTop(true),
                target.getWidth(),
                target.getHeight()
        );
        <b>this</b>.el.dom.style.display = &quot;block&quot;;
    },

    isVisible : <b>function</b>(){
        <b>return</b> this.el ? true : false;  
    },
    <i>/**
     * Direct alignment when values are already available. Show must be called at least once before
     * calling <b>this</b> method to ensure it is initialized.
     */</i>
    realign : <b>function</b>(l, t, w, h){
        <b>var</b> a = <b>this</b>.adjusts, d = <b>this</b>.el.dom, s = d.style;
        s.left = (l+a.l)+&quot;px&quot;;
        s.top = (t+a.t)+&quot;px&quot;;
        <b>var</b> sw = (w+a.w), sh = (h+a.h), sws = sw +&quot;px&quot;, shs = sh + &quot;px&quot;;
        <b>if</b>(s.width != sws || s.height != shs){
            s.width = sws;
            s.height = shs;
            <b>var</b> cn = d.childNodes;
            <b>var</b> sww = Math.max(0, (sw-12))+&quot;px&quot;;
            cn[0].childNodes[1].style.width = sww;
            cn[1].childNodes[1].style.width = sww;
            cn[2].childNodes[1].style.width = sww;
            cn[1].style.height = Math.max(0, (sh-12))+&quot;px&quot;;
        }
    },

    hide : <b>function</b>(){
        <b>if</b>(this.el){
            <b>this</b>.el.dom.style.display = &quot;none&quot;;
            Ext.Shadow.Pool.push(<b>this</b>.el);
            <b>delete</b> this.el;
        }
    },

    setZIndex : <b>function</b>(z){
        <b>this</b>.zIndex = z;
        <b>if</b>(this.el){
            <b>this</b>.el.setStyle(&quot;z-index&quot;, z);
        }
    }
};

Ext.Shadow.Pool = <b>function</b>(){
    <b>var</b> p = [];
    <b>var</b> markup = '&lt;div class=&quot;x-shadow&quot;&gt;&lt;div class=&quot;xst&quot;&gt;&lt;div class=&quot;xstl&quot;&gt;&lt;/div&gt;&lt;div class=&quot;xstc&quot;&gt;&lt;/div&gt;&lt;div class=&quot;xstr&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;xsc&quot;&gt;&lt;div class=&quot;xsml&quot;&gt;&lt;/div&gt;&lt;div class=&quot;xsmc&quot;&gt;&lt;/div&gt;&lt;div class=&quot;xsmr&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&quot;xsb&quot;&gt;&lt;div class=&quot;xsbl&quot;&gt;&lt;/div&gt;&lt;div class=&quot;xsbc&quot;&gt;&lt;/div&gt;&lt;div class=&quot;xsbr&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;';
    <b>return</b> {
        pull : <b>function</b>(){
            <b>var</b> sh = p.shift();
            <b>if</b>(!sh){
                sh = Ext.get(Ext.DomHelper.insertHtml(&quot;beforeBegin&quot;, document.body.firstChild, markup));
                <b>if</b>(Ext.isIE &amp;&amp; !Ext.isIE7){ <i>//ie6 broken png</i>
                    sh.setOpacity(.3);
                }
            }
            <b>return</b> sh;
        },

        push : <b>function</b>(sh){
            p.push(sh);
        }
    };
}();</code></pre><hr><div style="font-size:10px;text-align:center;color:gray;">yui-ext - Copyright &copy; 2006 Jack Slocum.  |
    Yahoo! UI - Copyright &copy; 2006 Yahoo! Inc.<br />All rights reserved.</div>
    </body></html>